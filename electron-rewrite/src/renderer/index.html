<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InfinitePIP</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app">
      <header class="header">
        <div class="brand">
          <h1>InfinitePIP</h1>
          <p>Advanced Picture-in-Picture for Desktop (Electron rewrite)</p>
        </div>
        <div class="status" id="status">
          <div class="dot" id="statusDot"></div>
          <div style="display: grid; gap: 2px">
            <strong id="statusText">Ready</strong>
            <span id="pipCount">0 Active PIPs</span>
          </div>
        </div>
      </header>

      <main class="content">
        <nav class="tabs" role="tablist" aria-label="Source types">
          <button class="tab active" id="tabScreens" role="tab" aria-selected="true">Screens</button>
          <button class="tab" id="tabWindows" role="tab" aria-selected="false">Windows</button>
          <button class="tab" id="tabRegions" role="tab" aria-selected="false">Regions</button>
          <button class="tab" id="tabActive" role="tab" aria-selected="false">Active PIPs</button>
        </nav>

        <section class="panel" id="panelSources">
          <div class="panelHeader">
            <div>
              <h2 id="panelTitle">Available Screens</h2>
              <p id="panelHelp">Create picture-in-picture windows from any connected display.</p>
            </div>
            <div class="actions">
              <button class="btn" id="refreshBtn">Refresh</button>
              <button class="btn danger" id="closeAllBtn" title="Close all PiP windows">Close All</button>
            </div>
          </div>

          <div class="grid" id="sourcesGrid"></div>
          <div class="emptyState hidden" id="emptyState">
            No sources found. Try “Refresh”, or check screen recording permissions.
          </div>
        </section>

        <section class="panel hidden" id="panelRegions">
          <div class="panelHeader">
            <div>
              <h2>Custom Screen Regions</h2>
              <p>Define a rectangle (x/y/width/height) and open it as a PiP.</p>
            </div>
            <div class="actions">
              <button class="btn" id="regionPreviewBtn">Update Preview</button>
              <button class="btn primary" id="regionCreateBtn">Create Region PiP</button>
            </div>
          </div>

          <div style="display: grid; gap: 12px; margin-top: 14px; grid-template-columns: 1fr 1fr">
            <div class="panel" style="margin-top: 0; box-shadow: none">
              <div style="display: grid; gap: 10px">
                <div style="display: grid; gap: 6px">
                  <div class="sub">Capture from screen</div>
                  <select id="regionScreenSelect" class="select"></select>
                </div>
                <div class="regionGrid">
                  <label class="regionField">
                    X
                    <input id="regionX" type="number" value="0" />
                  </label>
                  <label class="regionField">
                    Y
                    <input id="regionY" type="number" value="0" />
                  </label>
                  <label class="regionField">
                    Width
                    <input id="regionW" type="number" value="640" />
                  </label>
                  <label class="regionField">
                    Height
                    <input id="regionH" type="number" value="360" />
                  </label>
                </div>
                <div class="sub" id="regionInfo">Region: 640×360 at (0, 0)</div>
              </div>
            </div>

            <div class="panel" style="margin-top: 0; box-shadow: none">
              <div class="panelHeader" style="padding: 0; border: none; background: transparent">
                <div>
                  <h2 style="margin: 0; font-size: 14px">Region Preview</h2>
                  <p style="margin: 6px 0 0 0" class="sub">One-shot preview from the selected screen.</p>
                </div>
              </div>
              <div style="margin-top: 12px; border: 1px solid var(--subtle); border-radius: 14px; overflow: hidden">
                <img
                  id="regionPreviewImg"
                  alt="Region preview"
                  src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="
                  style="display: block; width: 100%; height: 240px; object-fit: cover; background: rgba(255,255,255,0.03)"
                />
              </div>
              <div class="sub" id="regionPreviewStatus" style="margin-top: 10px">Click “Update Preview”.</div>
            </div>
          </div>
        </section>

        <section class="panel hidden" id="panelActive">
          <div class="panelHeader">
            <div>
              <h2>Active PIP Windows</h2>
              <p>Close all PiPs from here. (Per-PiP listing comes next.)</p>
            </div>
            <div class="actions">
              <button class="btn danger" id="closeAllBtn2">Close All</button>
            </div>
          </div>
          <div class="emptyState">
            Tip: open multiple PiPs by clicking “Create PiP” on different sources.
          </div>
        </section>
      </main>

      <footer class="footer">
        <div class="tip">
          Tip: PiPs stay on top. Drag inside the PiP to pan, use the slider to zoom, and right-click to close.
        </div>
        <div class="pill" id="hintPill">Esc: quit capture • 0/+/−: opacity</div>
      </footer>
    </div>

    <script src="./index.js"></script>
  </body>
</html>


